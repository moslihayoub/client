import React from 'react';

interface MorePopupProps {
    isOpen: boolean;
    onClose: () => void;
    position?: { top: number; right: number };
    onAppModeClick: () => void;
    onLanguageClick: () => void;
}

const MorePopup: React.FC<MorePopupProps> = ({ isOpen, onClose, position, onAppModeClick, onLanguageClick }) => {
    if (!isOpen) return null;

    const menuItems = [
        {
            id: 'appmode',
            label: 'Mode d\'affichage',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 12C17 13.3261 16.4732 14.5979 15.5355 15.5355C14.5979 16.4732 13.3261 17 12 17C10.6739 17 9.40215 16.4732 8.46447 15.5355C7.52678 14.5979 7 13.3261 7 12C7 10.6739 7.52678 9.40215 8.46447 8.46447C9.40215 7.52678 10.6739 7 12 7C13.3261 7 14.5979 7.52678 15.5355 8.46447C16.4732 9.40215 17 10.6739 17 12Z" stroke="#475569" strokeWidth="1.5" />
                    <path fillRule="evenodd" clipRule="evenodd" d="M12 1.25C12.1989 1.25 12.3897 1.32902 12.5303 1.46967C12.671 1.61032 12.75 1.80109 12.75 2V4C12.75 4.19891 12.671 4.38968 12.5303 4.53033C12.3897 4.67098 12.1989 4.75 12 4.75C11.8011 4.75 11.6103 4.67098 11.4697 4.53033C11.329 4.38968 11.25 4.19891 11.25 4V2C11.25 1.80109 11.329 1.61032 11.4697 1.46967C11.6103 1.32902 11.8011 1.25 12 1.25ZM3.67008 3.71611C3.80421 3.5694 3.99108 3.48195 4.18965 3.47295C4.38822 3.46395 4.58224 3.53414 4.72908 3.66811L6.95008 5.70011C7.0938 5.83508 7.17859 6.02123 7.18609 6.21825C7.1936 6.41527 7.12322 6.60732 6.99019 6.75285C6.85715 6.89837 6.67217 6.98565 6.47527 6.9958C6.27836 7.00596 6.08538 6.93817 5.93808 6.80711L3.71708 4.77511C3.64429 4.70868 3.58531 4.62856 3.5435 4.53932C3.50169 4.45009 3.47788 4.35349 3.47342 4.25505C3.46897 4.15661 3.48395 4.05826 3.51752 3.96561C3.5511 3.87296 3.6026 3.78784 3.66908 3.71511M1.25 12C1.25 11.8011 1.32902 11.6103 1.46967 11.4697C1.61032 11.329 1.80109 11.25 2 11.25H4C4.19891 11.25 4.38968 11.329 4.53033 11.4697C4.67098 11.6103 4.75 11.8011 4.75 12C4.75 12.1989 4.67098 12.3897 4.53033 12.5303C4.38968 12.671 4.19891 12.75 4 12.75H2C1.80109 12.75 1.61032 12.671 1.46967 12.5303C1.32902 12.3897 1.25 12.1989 1.25 12ZM19.25 12C19.25 11.8011 19.329 11.6103 19.4697 11.4697C19.6103 11.329 19.8011 11.25 20 11.25H22C22.1989 11.25 22.3897 11.329 22.5303 11.4697C22.671 11.6103 22.75 11.8011 22.75 12C22.75 12.1989 22.671 12.3897 22.5303 12.5303C22.3897 12.671 22.1989 12.75 22 12.75H20C19.8011 12.75 19.6103 12.671 19.4697 12.5303C19.329 12.3897 19.25 12.1989 19.25 12ZM12 19.25C12.1989 19.25 12.3897 19.329 12.5303 19.4697C12.671 19.6103 12.75 19.8011 12.75 20V22C12.75 22.1989 12.671 22.3897 12.5303 22.5303C12.3897 22.671 12.1989 22.75 12 22.75C11.8011 22.75 11.6103 22.671 11.4697 22.5303C11.329 22.3897 11.25 22.1989 11.25 22V20C11.25 19.8011 11.329 19.6103 11.4697 19.4697C11.6103 19.329 11.8011 19.25 12 19.25Z" stroke="#475569" strokeWidth="1.5" />
                    <path opacity="0.5" d="M20.3321 3.71611C20.3986 3.78878 20.4502 3.87385 20.4839 3.96646C20.5175 4.05907 20.5326 4.1574 20.5282 4.25584C20.5239 4.35428 20.5001 4.4509 20.4584 4.54017C20.4167 4.62944 20.3578 4.70961 20.2851 4.77611L18.0621 6.80611C17.9902 6.87654 17.9049 6.93179 17.8112 6.96855C17.7175 7.00532 17.6173 7.02285 17.5167 7.0201C17.4161 7.01736 17.3171 6.99439 17.2256 6.95257C17.134 6.91075 17.0518 6.85093 16.9839 6.77668C16.9159 6.70242 16.8636 6.61526 16.8301 6.52037C16.7965 6.42548 16.7824 6.3248 16.7886 6.22435C16.7948 6.12389 16.8211 6.02571 16.866 5.93564C16.911 5.84558 16.9736 5.76547 17.0501 5.70011L19.2721 3.66811C19.3448 3.60162 19.4299 3.55012 19.5226 3.51655C19.6152 3.48298 19.7136 3.46799 19.812 3.47245C19.9105 3.47691 20.0071 3.50072 20.0963 3.54253C20.1855 3.58433 20.2657 3.64332 20.3321 3.71611ZM17.0261 17.0251C17.1667 16.8847 17.3573 16.8058 17.5561 16.8058C17.7548 16.8058 17.9455 16.8847 18.0861 17.0251L20.3091 19.2471C20.3807 19.3163 20.4378 19.3991 20.477 19.4906C20.5163 19.5822 20.5369 19.6806 20.5378 19.7802C20.5386 19.8797 20.5196 19.9785 20.4818 20.0707C20.4441 20.1628 20.3883 20.2465 20.3179 20.3169C20.2474 20.3873 20.1637 20.4429 20.0715 20.4806C19.9793 20.5183 19.8805 20.5372 19.7809 20.5363C19.6813 20.5354 19.5829 20.5146 19.4914 20.4753C19.4 20.4359 19.3172 20.3788 19.2481 20.3071L17.0261 18.0851C16.8856 17.9445 16.8067 17.7539 16.8067 17.5551C16.8067 17.3564 16.8856 17.1657 17.0261 17.0251ZM6.97508 17.0251C7.11553 17.1657 7.19442 17.3564 7.19442 17.5551C7.19442 17.7539 7.11553 17.9445 6.97508 18.0851L4.75308 20.3081C4.61091 20.4406 4.42286 20.5127 4.22856 20.5093C4.03426 20.5059 3.84887 20.4271 3.71146 20.2897C3.57405 20.1523 3.49534 19.9669 3.49191 19.7726C3.48848 19.5783 3.5606 19.3903 3.69308 19.2481L5.91508 17.0251C6.05571 16.8847 6.24633 16.8058 6.44508 16.8058C6.64383 16.8058 6.83446 16.8847 6.97508 17.0251Z" stroke="#475569" strokeWidth="1.5" />
                </svg>
            ),
            onClick: () => {
                onAppModeClick();
            }
        },
        {
            id: 'language',
            label: 'Langue',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2.00001C6.477 2.00001 2 6.47701 2 12C2 12.4453 2.02833 12.8827 2.085 13.312C2.34457 15.2667 3.17569 17.1012 4.47404 18.5853C5.77239 20.0694 7.48014 21.1369 9.383 21.654C10.2362 21.8845 11.1162 22.0008 12 22C16.879 22 20.941 18.506 21.823 13.884C21.9397 13.2727 21.9987 12.6447 22 12C22.0015 10.5154 21.6718 9.04909 21.0348 7.70803C20.3978 6.36697 19.4697 5.18491 18.318 4.24801C16.5352 2.79091 14.3025 1.99653 12 2.00001Z" stroke="#475569" strokeWidth="1.5" />
                    <path d="M2.08496 13.312C3.20871 12.9331 4.41956 12.8957 5.56456 13.2045C6.70956 13.5133 7.73737 14.1546 8.51817 15.0472C9.29897 15.9398 9.79773 17.0438 9.95147 18.2197C10.1052 19.3956 9.90703 20.5907 9.38196 21.654M21.823 13.885C20.8129 13.6826 19.872 13.2236 19.0908 12.5522C18.3095 11.8808 17.7142 11.0197 17.3621 10.0516C17.01 9.08352 16.913 8.04112 17.0804 7.0247C17.2478 6.00829 17.674 5.05206 18.318 4.24805" stroke="#475569" strokeWidth="1.5" />
                    <path d="M16 16C16 16.2652 15.8946 16.5196 15.7071 16.7071C15.5196 16.8946 15.2652 17 15 17C14.7348 17 14.4804 16.8946 14.2929 16.7071C14.1054 16.5196 14 16.2652 14 16C14 15.7348 14.1054 15.4804 14.2929 15.2929C14.4804 15.1054 14.7348 15 15 15C15.2652 15 15.5196 15.1054 15.7071 15.2929C15.8946 15.4804 16 15.7348 16 16ZM13 8.5C13 9.16304 12.7366 9.79893 12.2678 10.2678C11.7989 10.7366 11.163 11 10.5 11C9.83696 11 9.20107 10.7366 8.73223 10.2678C8.26339 9.79893 8 9.16304 8 8.5C8 7.83696 8.26339 7.20107 8.73223 6.73223C9.20107 6.26339 9.83696 6 10.5 6C11.163 6 11.7989 6.26339 12.2678 6.73223C12.7366 7.20107 13 7.83696 13 8.5Z" stroke="#475569" strokeWidth="1.5" />
                </svg>
            ),
            onClick: () => {
                onLanguageClick();
            }
        },
        {
            id: 'settings',
            label: 'Paramètre',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.843 3.802C9.872 2.601 10.886 2 12 2C13.114 2 14.128 2.6 16.157 3.802L16.843 4.208C18.872 5.41 19.886 6.011 20.443 7C21 7.99 21 9.19 21 11.594V12.406C21 14.809 21 16.011 20.443 17C19.886 17.989 18.872 18.59 16.843 19.791L16.157 20.198C14.128 21.399 13.114 22 12 22C10.886 22 9.872 21.4 7.843 20.198L7.157 19.791C5.128 18.591 4.114 17.989 3.557 17C3 16.01 3 14.81 3 12.406V11.594C3 9.19 3 7.989 3.557 7C4.114 6.011 5.128 5.41 7.157 4.208L7.843 3.802Z" stroke="#475569" strokeWidth="1.5" />
                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#475569" strokeWidth="1.5" />
                </svg>
            ),
            onClick: () => {
                console.log('Paramètre clicked');
                onClose();
            }
        }
    ];

    return (
        <>
            {/* Backdrop */}
            <div
                className="fixed inset-0 z-40"
                onClick={onClose}
            />

            {/* Popup */}
            <div
                className="fixed z-50 w-[281px] bg-white rounded-[24px] p-[14px] flex flex-col gap-[12px]"
                style={{
                    top: position?.top ?? 70,
                    right: position?.right ?? 36,
                    boxShadow: '0px 25px 50px -12px rgba(0, 0, 0, 0.25)'
                }}
            >
                {menuItems.map((item) => (
                    <button
                        key={item.id}
                        onClick={item.onClick}
                        className="flex items-center gap-[10px] px-[8px] py-[4px] rounded-[7px] hover:bg-slate-50 transition-colors duration-150 w-full text-left group"
                    >
                        <div className="w-[24px] h-[24px] flex items-center justify-center flex-shrink-0">
                            {item.icon}
                        </div>
                        <p className="text-[14px] text-slate-700 font-bricolagegrotesque font-normal leading-[20px] flex-1">
                            {item.label}
                        </p>
                    </button>
                ))}
            </div>
        </>
    );
};

export default MorePopup;

