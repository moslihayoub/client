import { useState, useEffect } from "react";
import VoiceTranscriber from "./VoiceTranscriber";

interface NexaStayTextareaProps {
    fullscreen: boolean;
    setFullscreen: React.Dispatch<React.SetStateAction<boolean>>;
    width: number;
    height: number;
    fullHeight: number;
}

export default function NexaStayTextarea({ fullscreen, setFullscreen, width, height, fullHeight }: NexaStayTextareaProps) {
    const [value, setValue] = useState("");
    const maxWords = 200;
    const [currentTextIndex, setCurrentTextIndex] = useState(0);

    // Debug logging
    const [isVisible, setIsVisible] = useState(true);
    const [showVoiceTranscriber, setShowVoiceTranscriber] = useState(false);

    const animatedTexts = [
        "Où vous voulez passer vos vacances",
        "Comment je peux vous aidez",
        "Comment vous voulez vivre votre séjour",
        "Si vous voulez découvrir les activités"
    ];

    const wordCount = value.trim().split(/\s+/).filter(Boolean).length;
    const percentage = ((wordCount / maxWords) * 100);

    // Text animation effect
    useEffect(() => {
        const interval = setInterval(() => {
            setIsVisible(false);
            setTimeout(() => {
                setCurrentTextIndex((prev) => (prev + 1) % animatedTexts.length);
                setIsVisible(true);
            }, 300); // Fade out duration
        }, 3000); // Change text every 3 seconds

        return () => clearInterval(interval);
    }, []);

    return (
        <div 
            className={`rounded-[22px] bg-nexastay-border shadow-nexastay-default transition-all duration-500 ease-in-out ${
                fullscreen ? ' shadow-2xl z-50' : 'transform scale-100'
            }`}
            style={{
                width: `${width}%`,
                height: `${fullscreen ? Math.min(fullHeight, 90) : height}%`,
                padding: '1px'
            }}
        >
            <div
                className="flex flex-col justify-between rounded-[22px] bg-white p-[12px_18px] transition-all duration-500 ease-in-out w-full h-full"
            >
            {/* Textarea wrapper */}
            <div className="relative flex-1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute top-0 left-0">
                        <path d="M16.1124 17.9856L19.6301 21.5212M16.1124 17.9856C16.8239 17.2716 17.3879 16.4245 17.7722 15.4926C18.1564 14.5607 18.3533 13.5623 18.3516 12.5543C18.3499 11.5463 18.1497 10.5485 17.7625 9.61782M16.1124 17.9856C14.6752 19.4274 12.7242 20.2393 10.6885 20.2427C8.65272 20.2461 6.69902 19.4406 5.25715 18.0035C3.81529 16.5664 3.00337 14.6153 3.00001 12.5796C2.99665 10.5438 3.80213 8.59013 5.23924 7.14826C5.95083 6.43433 6.79607 5.86754 7.7267 5.48026C8.65734 5.09297 9.65514 4.89279 10.6631 4.89112C11.6711 4.88946 12.6696 5.08635 13.6015 5.47056" stroke="url(#paint0_radial_420_7186)" stroke-width="1.5" stroke-linecap="round" />
                        <path d="M20.4189 2.63566C20.3599 2.4759 20.2573 2.33587 20.1228 2.2315C19.9727 2.11519 19.79 2.04872 19.6003 2.0414C19.4105 2.03408 19.2232 2.08628 19.0647 2.19069L18.761 2.3906L18.6074 2.48462C18.2709 2.67539 17.8977 2.7925 17.5126 2.8282C17.1274 2.86389 16.7391 2.81736 16.3732 2.69167L16.0288 2.57429L15.9172 2.54298C15.7408 2.50666 15.5577 2.52345 15.3909 2.59122C15.2241 2.659 15.0812 2.77471 14.9801 2.92372C14.8791 3.07274 14.8245 3.24837 14.8233 3.4284C14.8221 3.60843 14.8743 3.78478 14.9733 3.93515L15.1732 4.23882L15.2672 4.39238C15.458 4.72887 15.5751 5.10206 15.6108 5.48722C15.6465 5.87238 15.6 6.26073 15.4743 6.62655L15.3569 6.97097L15.3262 7.0819C15.2898 7.2582 15.3065 7.44135 15.3741 7.60816C15.4418 7.77498 15.5575 7.91798 15.7064 8.01908C15.8554 8.12019 16.0309 8.17486 16.211 8.17618C16.391 8.17749 16.5674 8.12541 16.7178 8.02649L17.0214 7.82658L17.175 7.73256C17.5115 7.54179 17.8847 7.42468 18.2698 7.38898C18.655 7.35329 19.0434 7.39982 19.4092 7.52551L19.7536 7.64289L19.8652 7.6742C20.0416 7.71052 20.2247 7.69373 20.3915 7.62596C20.5583 7.55818 20.7013 7.44247 20.8023 7.29346C20.9033 7.14444 20.9579 6.96881 20.9591 6.78878C20.9603 6.60874 20.9081 6.43239 20.8091 6.28203L20.6092 5.97836L20.5152 5.8248C20.3244 5.48831 20.2073 5.11512 20.1716 4.72996C20.1359 4.3448 20.1824 3.95645 20.3081 3.59063L20.4255 3.24621L20.4563 3.13528C20.4908 2.96852 20.4778 2.79543 20.4189 2.63566Z" fill="url(#paint1_radial_420_7186)" />
                        <defs>
                            <radialGradient id="paint0_radial_420_7186" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(11.3151 3.60437) rotate(90) scale(23.5418)">
                                <stop stop-color="#2DD4BF" />
                                <stop offset="0.509615" stop-color="#0EA5E9" />
                                <stop offset="1" stop-color="#D946EF" />
                            </radialGradient>
                            <radialGradient id="paint1_radial_420_7186" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(20.4681 1.78631) rotate(127.798) scale(10.3081 10.309)">
                                <stop stop-color="#2DD4BF" />
                                <stop offset="0.509615" stop-color="#0EA5E9" />
                                <stop offset="1" stop-color="#D946EF" />
                            </radialGradient>
                        </defs>
                    </svg>

                    <div className="flex flex-col gap-[5px] h-full pr-[45px]">
                        {/* Column text above textarea */}
                        <div className="flex flex-col gap-1 text-base pointer-events-none pl-[26px]">
                            <span className="font-semibold text-nexastay-gradient bg-clip-text">
                        Questionner NexaStay
                    </span>{" "}
                </div>
                {showVoiceTranscriber ? (
                    <VoiceTranscriber
                        inline
                        isVisible={false}
                        onTranscription={(text) => {
                            setValue(text);
                            setShowVoiceTranscriber(false);
                        }}
                        onCancel={() => setShowVoiceTranscriber(false)}
                        className="pl-[26px] py-2"
                    />
                ) : (
                <textarea
                    value={value}
                    placeholder={width <= 492 ? "" : "Type here..."}
                    name="chat-input"
                    id="chat-input"
                        onChange={(e) => {
                            const newValue = e.target.value;
                            const words = newValue.trim().split(/\s+/).filter(Boolean);

                            // Prevent typing if word limit is reached
                            if (words.length > maxWords) {
                                return; // Don't update if trying to add more words
                            }

                            setValue(newValue);
                        }}
                        className="w-full h-full resize-none outline-none border-none text-gray-800 text-base bg-transparent pl-[26px] "
                    />
                )}
                </div>

                {/* Custom styled placeholder (only visible when empty) */}
                {value === "" && (
                    <div className="absolute top-0 left-[26px] flex items-center gap-1 text-base pointer-events-none">
                            <div className={width <= 492 ? "flex flex-col" : "flex gap-1"}>
                            <span className="font-semibold bg-nexastay-gradient bg-clip-text text-transparent">
                                Questionner NexaStay
                                </span>
                                <span
                                    className={`text-gray-400 transition-opacity duration-300 ${isVisible ? 'opacity-100' : 'opacity-0'
                                        }`}
                                >
                                    {" "}{animatedTexts[currentTextIndex]}
                                </span>
                        </div>
                    </div>
                )}
                    {/* Send button - disabled when empty, colorful when active */}
                    <button
                        type="submit"
                        disabled={value.trim().length === 0}
                        className={`w-[44px] h-[44px] flex sm:hidden md:flex lg:flex xl:flex items-center justify-center absolute top-0 right-0 ${value.trim().length === 0 ? 'cursor-not-allowed' : ''
                            }`}
                    >
                        {value.trim().length === 0 ? (
                            <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.1387 10.9889C18.1437 8.04792 22.2073 7.95885 23.3988 10.7217L23.4996 10.9906L24.8558 14.9567C25.1666 15.8663 25.6689 16.6986 26.3287 17.3976C26.9885 18.0965 27.7906 18.6459 28.6808 19.0085L29.0454 19.1446L33.0115 20.4992C35.9525 21.5041 36.0416 25.5677 33.2804 26.7592L33.0115 26.8601L29.0454 28.2163C28.1355 28.5269 27.3029 29.029 26.6036 29.6889C25.9043 30.3487 25.3548 31.1509 24.9919 32.0412L24.8558 32.4042L23.5013 36.372C22.4963 39.313 18.4327 39.402 17.2429 36.6409L17.1387 36.372L15.7842 32.4059C15.4736 31.496 14.9714 30.6633 14.3116 29.9641C13.6517 29.2648 12.8496 28.7152 11.9592 28.3524L11.5962 28.2163L7.63011 26.8617C4.68746 25.8568 4.59839 21.7932 7.36122 20.6033L7.63011 20.4992L11.5962 19.1446C12.5058 18.8338 13.3381 18.3316 14.0371 17.6717C14.7361 17.0119 15.2854 16.2099 15.648 15.3197L15.7842 14.9567L17.1387 10.9889ZM33.7644 5.19434C34.0788 5.19434 34.3869 5.28253 34.6537 5.44889C34.9205 5.61526 35.1352 5.85312 35.2736 6.13545L35.3542 6.33207L35.9424 8.05632L37.6684 8.64452C37.9834 8.75156 38.2596 8.94973 38.462 9.21391C38.6643 9.4781 38.7836 9.7964 38.8049 10.1285C38.8261 10.4606 38.7483 10.7915 38.5813 11.0793C38.4142 11.3671 38.1655 11.5988 37.8667 11.7451L37.6684 11.8258L35.9441 12.414L35.3559 14.1399C35.2487 14.4549 35.0504 14.731 34.7861 14.9331C34.5218 15.1353 34.2035 15.2545 33.8714 15.2755C33.5393 15.2966 33.2085 15.2186 32.9208 15.0514C32.6331 14.8843 32.4015 14.6355 32.2553 14.3366L32.1746 14.1399L31.5864 12.4157L29.8605 11.8275C29.5454 11.7204 29.2692 11.5223 29.0669 11.2581C28.8646 10.9939 28.7452 10.6756 28.724 10.3435C28.7027 10.0114 28.7806 9.68053 28.9476 9.39272C29.1146 9.10492 29.3633 8.87317 29.6622 8.72686L29.8605 8.6462L31.5847 8.058L32.1729 6.33207C32.2863 6.00004 32.5007 5.71179 32.7861 5.50776C33.0715 5.30372 33.4136 5.19413 33.7644 5.19434Z" fill="#94A3B8" />
                            </svg>
                        ) : (
                            <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.1387 10.9889C18.1437 8.04792 22.2073 7.95885 23.3988 10.7217L23.4996 10.9906L24.8558 14.9567C25.1666 15.8663 25.6689 16.6986 26.3287 17.3976C26.9885 18.0965 27.7906 18.6459 28.6808 19.0085L29.0454 19.1446L33.0115 20.4992C35.9525 21.5041 36.0416 25.5677 33.2804 26.7592L33.0115 26.8601L29.0454 28.2163C28.1355 28.5269 27.3029 29.029 26.6036 29.6889C25.9043 30.3487 25.3548 31.1509 24.9919 32.0412L24.8558 32.4042L23.5013 36.372C22.4963 39.313 18.4327 39.402 17.2429 36.6409L17.1387 36.372L15.7842 32.4059C15.4736 31.496 14.9714 30.6633 14.3116 29.9641C13.6517 29.2648 12.8496 28.7152 11.9592 28.3524L11.5962 28.2163L7.63011 26.8617C4.68746 25.8568 4.59839 21.7932 7.36122 20.6033L7.63011 20.4992L11.5962 19.1446C12.5058 18.8338 13.3381 18.3316 14.0371 17.6717C14.7361 17.0119 15.2854 16.2099 15.648 15.3197L15.7842 14.9567L17.1387 10.9889ZM33.7644 5.19434C34.0788 5.19434 34.3869 5.28253 34.6537 5.44889C34.9205 5.61526 35.1352 5.85312 35.2736 6.13545L35.3542 6.33207L35.9424 8.05632L37.6684 8.64452C37.9834 8.75156 38.2596 8.94973 38.462 9.21391C38.6643 9.4781 38.7836 9.7964 38.8049 10.1285C38.8261 10.4606 38.7483 10.7915 38.5813 11.0793C38.4142 11.3671 38.1655 11.5988 37.8667 11.7451L37.6684 11.8258L35.9441 12.414L35.3559 14.1399C35.2487 14.4549 35.0504 14.731 34.7861 14.9331C34.5218 15.1353 34.2035 15.2545 33.8714 15.2755C33.5393 15.2966 33.2085 15.2186 32.9208 15.0514C32.6331 14.8843 32.4015 14.6355 32.2553 14.3366L32.1746 14.1399L31.5864 12.4157L29.8605 11.8275C29.5454 11.7204 29.2692 11.5223 29.0669 11.2581C28.8646 10.9939 28.7452 10.6756 28.724 10.3435C28.7027 10.0114 28.7806 9.68053 28.9476 9.39272C29.1146 9.10492 29.3633 8.87317 29.6622 8.72686L29.8605 8.6462L31.5847 8.058L32.1729 6.33207C32.2863 6.00004 32.5007 5.71179 32.7861 5.50776C33.0715 5.30372 33.4136 5.19413 33.7644 5.19434Z" fill="url(#paint0_radial_103_1890)" />
                                <defs>
                                    <radialGradient id="paint0_radial_103_1890" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(22.0812 2.60598) rotate(90) scale(47.3558 47.3583)">
                                        <stop stop-color="#2DD4BF" />
                                        <stop offset="0.509615" stop-color="#0EA5E9" />
                                        <stop offset="1" stop-color="#D946EF" />
                                    </radialGradient>
                                </defs>
                            </svg>

                        )}
                </button>
            </div>

            {/* Buttons row */}
                <div className="flex items-center justify-end gap-[16px] mt-1">
                    {/*Enhancement button*/}
                <button className="w-[34px] h-[34px] flex items-center justify-center group relative">
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                            <path d="M8.84498 12.922C8.57316 12.6552 8.3569 12.3372 8.20869 11.9863C8.06048 11.6355 7.98325 11.2588 7.98148 10.8779C7.9797 10.497 8.0534 10.1196 8.19833 9.76739C8.34326 9.41518 8.55654 9.09517 8.82586 8.82586C9.09517 8.55654 9.41518 8.34326 9.76739 8.19833C10.1196 8.0534 10.497 7.9797 10.8779 7.98148C11.2588 7.98325 11.6355 8.06048 11.9863 8.20869C12.3372 8.3569 12.6552 8.57316 12.922 8.84498L25.156 21.078C25.6816 21.6218 25.9726 22.3505 25.9661 23.1068C25.9597 23.8632 25.6564 24.5867 25.1215 25.1215C24.5867 25.6564 23.8632 25.9597 23.1068 25.9661C22.3505 25.9726 21.6218 25.6816 21.078 25.156L8.84498 12.922Z" stroke="#1E293B" stroke-width="1.5" />
                            <path opacity="0.5" d="M11 15L15 11" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path d="M21.1001 7.30656C21.1355 7.21595 21.1973 7.13812 21.2776 7.08325C21.3579 7.02838 21.4529 6.99902 21.5501 6.99902C21.6474 6.99902 21.7424 7.02838 21.8227 7.08325C21.9029 7.13812 21.9648 7.21595 22.0001 7.30656L22.4301 8.40156C22.454 8.46357 22.4905 8.51994 22.5374 8.56711C22.5842 8.61427 22.6403 8.6512 22.7021 8.67556L23.7931 9.10756C23.8835 9.14354 23.961 9.20581 24.0155 9.2863C24.0701 9.36679 24.0993 9.4618 24.0993 9.55906C24.0993 9.65631 24.0701 9.75132 24.0155 9.83181C23.961 9.9123 23.8835 9.97457 23.7931 10.0106L22.7031 10.4426C22.6418 10.4677 22.5861 10.5048 22.5392 10.5516C22.4924 10.5985 22.4553 10.6542 22.4301 10.7156L22.0001 11.8096C21.9648 11.9002 21.9029 11.978 21.8227 12.0329C21.7424 12.0877 21.6474 12.1171 21.5501 12.1171C21.4529 12.1171 21.3579 12.0877 21.2776 12.0329C21.1973 11.978 21.1355 11.9002 21.1001 11.8096L20.6701 10.7146C20.645 10.6532 20.6079 10.5975 20.561 10.5506C20.5142 10.5038 20.4585 10.4667 20.3971 10.4416L19.3071 10.0096C19.2168 9.97357 19.1393 9.9113 19.0847 9.83081C19.0302 9.75032 19.001 9.65531 19.001 9.55806C19.001 9.4608 19.0302 9.36579 19.0847 9.2853C19.1393 9.20481 19.2168 9.14254 19.3071 9.10656L20.3971 8.67456C20.4586 8.6493 20.5143 8.61207 20.5612 8.56502C20.6081 8.51798 20.6451 8.46207 20.6701 8.40056L21.1001 7.30656Z" stroke="#1E293B" />
                            <path opacity="0.5" d="M24.9672 14.1298C25.0025 14.0392 25.0643 13.9614 25.1446 13.9065C25.2249 13.8516 25.3199 13.8223 25.4172 13.8223C25.5144 13.8223 25.6094 13.8516 25.6897 13.9065C25.77 13.9614 25.8318 14.0392 25.8672 14.1298L26.0232 14.5288C26.0732 14.6538 26.1712 14.7528 26.2962 14.8018L26.6942 14.9598C26.7842 14.996 26.8613 15.0582 26.9157 15.1386C26.97 15.219 26.9991 15.3138 26.9991 15.4108C26.9991 15.5078 26.97 15.6026 26.9157 15.683C26.8613 15.7634 26.7842 15.8256 26.6942 15.8618L26.2962 16.0198C26.2348 16.0449 26.1791 16.082 26.1322 16.1289C26.0854 16.1758 26.0483 16.2315 26.0232 16.2928L25.8672 16.6928C25.8318 16.7834 25.77 16.8612 25.6897 16.9161C25.6094 16.971 25.5144 17.0003 25.4172 17.0003C25.3199 17.0003 25.2249 16.971 25.1446 16.9161C25.0643 16.8612 25.0025 16.7834 24.9672 16.6928L24.8102 16.2928C24.7851 16.2316 24.7482 16.1759 24.7015 16.129C24.6548 16.0822 24.5993 16.045 24.5382 16.0198L24.1402 15.8618C24.0501 15.8256 23.973 15.7634 23.9186 15.683C23.8643 15.6026 23.8353 15.5078 23.8353 15.4108C23.8353 15.3138 23.8643 15.219 23.9186 15.1386C23.973 15.0582 24.0501 14.996 24.1402 14.9598L24.5382 14.8018C24.5993 14.7765 24.6548 14.7394 24.7015 14.6926C24.7482 14.6457 24.7851 14.59 24.8102 14.5288L24.9672 14.1298ZM10.1332 20.3068C10.1685 20.2162 10.2303 20.1384 10.3106 20.0835C10.3909 20.0286 10.4859 19.9993 10.5832 19.9993C10.6804 19.9993 10.7754 20.0286 10.8557 20.0835C10.936 20.1384 10.9978 20.2162 11.0332 20.3068L11.1902 20.7068C11.2142 20.7686 11.2507 20.8248 11.2976 20.8718C11.3444 20.9188 11.4004 20.9556 11.4622 20.9798L11.8602 21.1368C11.9505 21.1728 12.028 21.2351 12.0826 21.3155C12.1371 21.396 12.1663 21.491 12.1663 21.5883C12.1663 21.6855 12.1371 21.7806 12.0826 21.8611C12.028 21.9415 11.9505 22.0038 11.8602 22.0398L11.4622 22.1978C11.4004 22.222 11.3444 22.2588 11.2976 22.3058C11.2507 22.3528 11.2142 22.409 11.1902 22.4708L11.0332 22.8708C10.9978 22.9614 10.936 23.0392 10.8557 23.0941C10.7754 23.149 10.6804 23.1783 10.5832 23.1783C10.4859 23.1783 10.3909 23.149 10.3106 23.0941C10.2303 23.0392 10.1685 22.9614 10.1332 22.8708L9.97616 22.4708C9.95214 22.409 9.91557 22.3528 9.86876 22.3058C9.82194 22.2588 9.7659 22.222 9.70416 22.1978L9.30616 22.0398C9.21581 22.0038 9.13834 21.9415 9.08376 21.8611C9.02918 21.7806 9 21.6855 9 21.5883C9 21.491 9.02918 21.396 9.08376 21.3155C9.13834 21.2351 9.21581 21.1728 9.30616 21.1368L9.70416 20.9798C9.76599 20.9554 9.8221 20.9185 9.86892 20.8714C9.91574 20.8242 9.95226 20.7678 9.97616 20.7058L10.1332 20.3068Z" stroke="#1E293B" />
                        </svg>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <path opacity="0.5" d="M8.84481 8.84505C8.3042 9.38572 8.00049 10.119 8.00049 10.8836C8.00049 11.6481 8.3042 12.3814 8.84481 12.9221L10.4318 14.5101C10.4438 14.4961 10.9868 15.0131 10.9998 15.0001L14.9998 11.0001C15.0128 10.9871 14.4958 10.4441 14.5098 10.4321L12.9218 8.84505C12.3812 8.30444 11.6479 8.00073 10.8833 8.00073C10.1187 8.00073 9.38547 8.30444 8.84481 8.84505ZM10.1328 20.3071C10.1681 20.2164 10.23 20.1386 10.3103 20.0837C10.3906 20.0289 10.4856 19.9995 10.5828 19.9995C10.6801 19.9995 10.775 20.0289 10.8553 20.0837C10.9356 20.1386 10.9975 20.2164 11.0328 20.3071L11.1898 20.7071C11.2138 20.7689 11.2504 20.8251 11.2972 20.8721C11.344 20.919 11.4001 20.9558 11.4618 20.9801L11.8598 21.1371C11.9502 21.173 12.0276 21.2353 12.0822 21.3158C12.1368 21.3963 12.166 21.4913 12.166 21.5886C12.166 21.6858 12.1368 21.7808 12.0822 21.8613C12.0276 21.9418 11.9502 22.0041 11.8598 22.0401L11.4618 22.1981C11.4001 22.2223 11.344 22.2591 11.2972 22.3061C11.2504 22.353 11.2138 22.4092 11.1898 22.4711L11.0328 22.8711C10.9975 22.9617 10.9356 23.0395 10.8553 23.0944C10.775 23.1492 10.6801 23.1786 10.5828 23.1786C10.4856 23.1786 10.3906 23.1492 10.3103 23.0944C10.23 23.0395 10.1681 22.9617 10.1328 22.8711L9.97581 22.4711C9.9518 22.4092 9.91523 22.353 9.86841 22.3061C9.8216 22.2591 9.76555 22.2223 9.70381 22.1981L9.30581 22.0401C9.21546 22.0041 9.13799 21.9418 9.08341 21.8613C9.02883 21.7808 8.99965 21.6858 8.99965 21.5886C8.99965 21.4913 9.02883 21.3963 9.08341 21.3158C9.13799 21.2353 9.21546 21.173 9.30581 21.1371L9.70381 20.9801C9.76565 20.9557 9.82175 20.9188 9.86857 20.8716C9.91539 20.8244 9.95191 20.7681 9.97581 20.7061L10.1328 20.3071Z" fill="url(#paint0_radial_103_1843)" />
                            <path opacity="0.2" d="M24.9669 14.13C25.0022 14.0394 25.0641 13.9616 25.1443 13.9067C25.2246 13.8519 25.3196 13.8225 25.4169 13.8225C25.5141 13.8225 25.6091 13.8519 25.6894 13.9067C25.7697 13.9616 25.8315 14.0394 25.8669 14.13L26.0229 14.529C26.0729 14.654 26.1709 14.753 26.2959 14.802L26.6939 14.96C26.7839 14.9962 26.8611 15.0585 26.9154 15.1388C26.9697 15.2192 26.9988 15.314 26.9988 15.411C26.9988 15.5081 26.9697 15.6029 26.9154 15.6832C26.8611 15.7636 26.7839 15.8259 26.6939 15.862L26.2959 16.02C26.2345 16.0452 26.1788 16.0823 26.132 16.1291C26.0851 16.176 26.048 16.2317 26.0229 16.293L25.8669 16.693C25.8315 16.7836 25.7697 16.8615 25.6894 16.9163C25.6091 16.9712 25.5141 17.0006 25.4169 17.0006C25.3196 17.0006 25.2246 16.9712 25.1443 16.9163C25.0641 16.8615 25.0022 16.7836 24.9669 16.693L24.8099 16.293C24.7848 16.2318 24.7479 16.1761 24.7012 16.1293C24.6545 16.0824 24.599 16.0453 24.5379 16.02L24.1399 15.862C24.0498 15.8259 23.9727 15.7636 23.9183 15.6832C23.864 15.6029 23.835 15.5081 23.835 15.411C23.835 15.314 23.864 15.2192 23.9183 15.1388C23.9727 15.0585 24.0498 14.9962 24.1399 14.96L24.5379 14.802C24.599 14.7768 24.6545 14.7397 24.7012 14.6928C24.7479 14.6459 24.7848 14.5903 24.8099 14.529L24.9669 14.13Z" fill="url(#paint1_radial_103_1843)" />
                            <path opacity="0.7" d="M21.1001 7.30704C21.1355 7.21644 21.1973 7.13861 21.2776 7.08374C21.3579 7.02887 21.4529 6.99951 21.5501 6.99951C21.6474 6.99951 21.7424 7.02887 21.8227 7.08374C21.9029 7.13861 21.9648 7.21644 22.0001 7.30704L22.4301 8.40204C22.454 8.46406 22.4905 8.52043 22.5374 8.5676C22.5842 8.61476 22.6403 8.65169 22.7021 8.67604L23.7931 9.10804C23.8835 9.14403 23.961 9.2063 24.0155 9.28679C24.0701 9.36728 24.0993 9.46229 24.0993 9.55954C24.0993 9.6568 24.0701 9.75181 24.0155 9.8323C23.961 9.91279 23.8835 9.97506 23.7931 10.011L22.7031 10.443C22.6418 10.4682 22.5861 10.5053 22.5392 10.5521C22.4924 10.599 22.4553 10.6547 22.4301 10.716L22.0001 11.81C21.9648 11.9006 21.9029 11.9785 21.8227 12.0333C21.7424 12.0882 21.6474 12.1176 21.5501 12.1176C21.4529 12.1176 21.3579 12.0882 21.2776 12.0333C21.1973 11.9785 21.1355 11.9006 21.1001 11.81L20.6701 10.715C20.645 10.6537 20.6079 10.598 20.561 10.5511C20.5142 10.5043 20.4585 10.4672 20.3971 10.442L19.3071 10.01C19.2168 9.97406 19.1393 9.91179 19.0847 9.8313C19.0302 9.75081 19.001 9.65579 19.001 9.55854C19.001 9.46129 19.0302 9.36628 19.0847 9.28579C19.1393 9.2053 19.2168 9.14303 19.3071 9.10704L20.3971 8.67504C20.4586 8.64979 20.5143 8.61256 20.5612 8.56551C20.6081 8.51847 20.6451 8.46256 20.6701 8.40104L21.1001 7.30704Z" fill="url(#paint2_radial_103_1843)" />
                            <path d="M15.5682 11.49C15.5562 11.504 15.0132 10.987 15.0002 11L11.0002 15C10.9872 15.013 11.5042 15.556 11.4902 15.568L21.0782 25.155C21.3459 25.4228 21.6638 25.6352 22.0136 25.7801C22.3633 25.9251 22.7383 25.9997 23.1169 25.9997C23.4955 25.9998 23.8705 25.9252 24.2203 25.7804C24.5701 25.6355 24.888 25.4232 25.1557 25.1555C25.4235 24.8878 25.6359 24.57 25.7809 24.2202C25.9258 23.8704 26.0004 23.4955 26.0005 23.1169C26.0005 22.7382 25.926 22.3633 25.7811 22.0135C25.6363 21.6636 25.4239 21.3458 25.1562 21.078L15.5682 11.49Z" fill="url(#paint3_radial_103_1843)" />
                            <defs>
                                <radialGradient id="paint0_radial_103_1843" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(11.5003 6.82636) rotate(90) scale(21.4859 9.90866)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                                <radialGradient id="paint1_radial_103_1843" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(25.4169 13.5766) rotate(90) scale(4.4989 4.47873)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                                <radialGradient id="paint2_radial_103_1843" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(21.5501 6.60351) rotate(90) scale(7.24519 7.21723)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                                <radialGradient id="paint3_radial_103_1843" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(18.5002 9.83915) rotate(90) scale(21.2341 21.2348)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                            </defs>
                        </svg>
                </button>

                    {/*Mic Button */}
                    <button className="w-[34px] h-[34px] flex items-center justify-center group relative"
                        onClick={() => setShowVoiceTranscriber(true)}>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                            <path d="M11 13C11 11.4087 11.6321 9.88258 12.7574 8.75736C13.8826 7.63214 15.4087 7 17 7C18.5913 7 20.1174 7.63214 21.2426 8.75736C22.3679 9.88258 23 11.4087 23 13V18C23 19.5913 22.3679 21.1174 21.2426 22.2426C20.1174 23.3679 18.5913 24 17 24C15.4087 24 13.8826 23.3679 12.7574 22.2426C11.6321 21.1174 11 19.5913 11 18V13Z" stroke="#1E293B" stroke-width="1.5" />
                            <path opacity="0.5" d="M15 11.5C15 11.5 15.473 11 17 11C18.527 11 19 11.5 19 11.5M15 14.5C15 14.5 15.473 14 17 14C18.527 14 19 14.5 19 14.5M26 16V18C26 19.1819 25.7672 20.3522 25.3149 21.4442C24.8626 22.5361 24.1997 23.5282 23.364 24.364C22.5282 25.1997 21.5361 25.8626 20.4442 26.3149C19.3522 26.7672 18.1819 27 17 27C15.8181 27 14.6478 26.7672 13.5558 26.3149C12.4639 25.8626 11.4718 25.1997 10.636 24.364C9.80031 23.5282 9.13738 22.5361 8.68508 21.4442C8.23279 20.3522 8 19.1819 8 18V16" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.692 15.3721C9.075 15.3721 9.385 15.6851 9.385 16.0701V17.9301C9.385 22.1691 12.795 25.6051 17 25.6051C21.206 25.6051 24.615 22.1691 24.615 17.9301V16.0701C24.615 15.6841 24.925 15.3721 25.308 15.3721C25.691 15.3721 26 15.6851 26 16.0701V17.9301C26 22.9401 21.97 27.0001 17 27.0001C12.03 27.0001 8 22.9401 8 17.9301V16.0701C8 15.6841 8.31 15.3721 8.692 15.3721Z" fill="url(#paint0_radial_103_1688)" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17 7C13.559 7 10.77 9.811 10.77 13.28V17.93C10.77 21.398 13.559 24.21 17 24.21C20.441 24.21 23.23 21.398 23.23 17.93V13.28C23.23 9.81 20.442 7 17 7ZM14.678 12.39C14.5443 12.2625 14.4664 12.0873 14.4614 11.9026C14.4563 11.7179 14.5245 11.5386 14.651 11.404L15.154 11.884L14.652 11.404L14.654 11.401L14.657 11.398L14.664 11.39L14.724 11.335C14.7653 11.3003 14.808 11.2673 14.852 11.236C14.9889 11.1432 15.1354 11.0654 15.289 11.004C15.668 10.85 16.219 10.721 17 10.721C17.781 10.721 18.332 10.85 18.711 11.004C18.901 11.081 19.043 11.164 19.148 11.236C19.2147 11.2822 19.2776 11.3337 19.336 11.39L19.343 11.398L19.346 11.401L19.348 11.403C19.348 11.403 19.349 11.404 18.856 11.874L19.349 11.404C19.612 11.684 19.599 12.126 19.322 12.391C19.1938 12.513 19.0235 12.581 18.8465 12.581C18.6695 12.581 18.4993 12.513 18.371 12.391L18.364 12.386C18.3097 12.3512 18.2521 12.3217 18.192 12.298C18 12.22 17.63 12.116 17 12.116C16.37 12.116 16 12.22 15.808 12.298C15.748 12.3217 15.6904 12.3512 15.636 12.386L15.629 12.391C15.5008 12.5127 15.3308 12.5805 15.154 12.5805C14.9773 12.5805 14.8072 12.5127 14.679 12.391M14.679 15.182C14.5453 15.0545 14.4674 14.8793 14.4624 14.6946C14.4573 14.5099 14.5255 14.3306 14.652 14.196L14.653 14.194L14.655 14.193L14.658 14.189L14.665 14.182L14.725 14.126C14.7664 14.0916 14.8091 14.0589 14.853 14.028C14.9899 13.9352 15.1364 13.8574 15.29 13.796C15.669 13.642 16.22 13.513 17.001 13.513C17.782 13.513 18.333 13.642 18.712 13.796C18.902 13.873 19.044 13.956 19.149 14.028C19.2157 14.0742 19.2786 14.1257 19.337 14.182L19.344 14.189L19.347 14.193L19.349 14.194C19.349 14.194 19.35 14.196 18.857 14.665L19.35 14.196C19.613 14.476 19.6 14.918 19.323 15.182C19.1948 15.304 19.0245 15.372 18.8475 15.372C18.6705 15.372 18.5003 15.304 18.372 15.182L18.365 15.178C18.3107 15.1432 18.2531 15.1137 18.193 15.09C18 15.01 17.63 14.907 17 14.907C16.37 14.907 16 15.011 15.808 15.089C15.748 15.1127 15.6904 15.1422 15.636 15.177L15.629 15.182C15.5008 15.3037 15.3308 15.3715 15.154 15.3715C14.9773 15.3715 14.8072 15.3037 14.679 15.182Z" fill="url(#paint1_radial_103_1688)" />
                            <defs>
                                <radialGradient id="paint0_radial_103_1688" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(17 14.4724) rotate(90) scale(16.4607 25.481)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                                <radialGradient id="paint1_radial_103_1688" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(17 5.66839) rotate(90) scale(24.3627 17.6385)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                            </defs>
                        </svg>
                </button>

                    {/*Voice Button*/}
                    <button
                        className="w-[34px] h-[34px] flex items-center justify-center group relative"
                        onClick={() => setShowVoiceTranscriber(true)}
                    >
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                            <path d="M17 9V25" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path opacity="0.5" d="M21 12V22M13 12V22" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path d="M25 16V18M9 16V18" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17 8.25C17.1989 8.25 17.3897 8.32902 17.5303 8.46967C17.671 8.61032 17.75 8.80109 17.75 9V25C17.75 25.1989 17.671 25.3897 17.5303 25.5303C17.3897 25.671 17.1989 25.75 17 25.75C16.8011 25.75 16.6103 25.671 16.4697 25.5303C16.329 25.3897 16.25 25.1989 16.25 25V9C16.25 8.80109 16.329 8.61032 16.4697 8.46967C16.6103 8.32902 16.8011 8.25 17 8.25ZM13 11.25C13.1989 11.25 13.3897 11.329 13.5303 11.4697C13.671 11.6103 13.75 11.8011 13.75 12V22C13.75 22.1989 13.671 22.3897 13.5303 22.5303C13.3897 22.671 13.1989 22.75 13 22.75C12.8011 22.75 12.6103 22.671 12.4697 22.5303C12.329 22.3897 12.25 22.1989 12.25 22V12C12.25 11.8011 12.329 11.6103 12.4697 11.4697C12.6103 11.329 12.8011 11.25 13 11.25ZM21 11.25C21.1989 11.25 21.3897 11.329 21.5303 11.4697C21.671 11.6103 21.75 11.8011 21.75 12V22C21.75 22.1989 21.671 22.3897 21.5303 22.5303C21.3897 22.671 21.1989 22.75 21 22.75C20.8011 22.75 20.6103 22.671 20.4697 22.5303C20.329 22.3897 20.25 22.1989 20.25 22V12C20.25 11.8011 20.329 11.6103 20.4697 11.4697C20.6103 11.329 20.8011 11.25 21 11.25ZM9 15.25C9.19891 15.25 9.38968 15.329 9.53033 15.4697C9.67098 15.6103 9.75 15.8011 9.75 16V18C9.75 18.1989 9.67098 18.3897 9.53033 18.5303C9.38968 18.671 9.19891 18.75 9 18.75C8.80109 18.75 8.61032 18.671 8.46967 18.5303C8.32902 18.3897 8.25 18.1989 8.25 18V16C8.25 15.8011 8.32902 15.6103 8.46967 15.4697C8.61032 15.329 8.80109 15.25 9 15.25ZM25 15.25C25.1989 15.25 25.3897 15.329 25.5303 15.4697C25.671 15.6103 25.75 15.8011 25.75 16V18C25.75 18.1989 25.671 18.3897 25.5303 18.5303C25.3897 18.671 25.1989 18.75 25 18.75C24.8011 18.75 24.6103 18.671 24.4697 18.5303C24.329 18.3897 24.25 18.1989 24.25 18V16C24.25 15.8011 24.329 15.6103 24.4697 15.4697C24.6103 15.329 24.8011 15.25 25 15.25Z" fill="url(#paint0_radial_103_1724)" />
                            <defs>
                                <radialGradient id="paint0_radial_103_1724" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(17 6.89595) rotate(90) scale(24.7732)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                            </defs>
                        </svg>
                </button>

                    {/*Fullscreen Button*/}
                <button className="w-[34px] h-[34px] flex items-center justify-center group relative" onClick={() => setFullscreen(!fullscreen)}>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                            <path d="M19 27C19 23.229 19 21.343 20.172 20.172C21.344 19.001 23.229 19 27 19" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path opacity="0.5" d="M7 19C10.771 19 12.657 19 13.828 20.172C14.999 21.344 15 23.229 15 27" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path d="M7 15C10.771 15 12.657 15 13.828 13.828C14.999 12.656 15 10.771 15 7" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                            <path opacity="0.5" d="M27 15C23.229 15 21.343 15 20.172 13.828C19.001 12.656 19 10.771 19 7" stroke="#1E293B" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" className="absolute opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M23.29 7.89C22.262 7.752 20.907 7.75 19 7.75C18.8011 7.75 18.6103 7.67098 18.4697 7.53033C18.329 7.38968 18.25 7.19891 18.25 7C18.25 6.80109 18.329 6.61032 18.4697 6.46967C18.6103 6.32902 18.8011 6.25 19 6.25H19.056C20.894 6.25 22.35 6.25 23.489 6.403C24.661 6.561 25.61 6.893 26.359 7.641C27.107 8.39 27.439 9.339 27.597 10.511C27.75 11.651 27.75 13.106 27.75 14.944V15C27.75 15.1989 27.671 15.3897 27.5303 15.5303C27.3897 15.671 27.1989 15.75 27 15.75C26.8011 15.75 26.6103 15.671 26.4697 15.5303C26.329 15.3897 26.25 15.1989 26.25 15C26.25 13.093 26.248 11.739 26.11 10.71C25.975 9.705 25.721 9.125 25.298 8.702C24.875 8.279 24.295 8.025 23.289 7.89M7 18.25C7.19891 18.25 7.38968 18.329 7.53033 18.4697C7.67098 18.6103 7.75 18.8011 7.75 19C7.75 20.907 7.752 22.262 7.89 23.29C8.025 24.295 8.279 24.875 8.702 25.298C9.125 25.721 9.705 25.975 10.711 26.11C11.739 26.248 13.093 26.25 15 26.25C15.1989 26.25 15.3897 26.329 15.5303 26.4697C15.671 26.6103 15.75 26.8011 15.75 27C15.75 27.1989 15.671 27.3897 15.5303 27.5303C15.3897 27.671 15.1989 27.75 15 27.75H14.944C13.106 27.75 11.65 27.75 10.511 27.597C9.339 27.439 8.39 27.107 7.641 26.359C6.893 25.61 6.561 24.661 6.403 23.489C6.25 22.349 6.25 20.894 6.25 19.056V19C6.25 18.8011 6.32902 18.6103 6.46967 18.4697C6.61032 18.329 6.80109 18.25 7 18.25Z" fill="url(#paint0_radial_103_1762)" />
                            <path opacity="0.5" d="M14.944 6.25H15C15.1989 6.25 15.3897 6.32902 15.5303 6.46967C15.671 6.61032 15.75 6.80109 15.75 7C15.75 7.19891 15.671 7.38968 15.5303 7.53033C15.3897 7.67098 15.1989 7.75 15 7.75C13.093 7.75 11.739 7.752 10.71 7.89C9.705 8.025 9.125 8.279 8.702 8.702C8.279 9.125 8.025 9.705 7.89 10.71C7.752 11.739 7.75 13.093 7.75 15C7.75 15.1989 7.67098 15.3897 7.53033 15.5303C7.38968 15.671 7.19891 15.75 7 15.75C6.80109 15.75 6.61032 15.671 6.46967 15.5303C6.32902 15.3897 6.25 15.1989 6.25 15V14.944C6.25 13.106 6.25 11.65 6.403 10.511C6.561 9.339 6.893 8.39 7.641 7.641C8.39 6.893 9.339 6.561 10.511 6.403C11.651 6.25 13.106 6.25 14.944 6.25ZM27 18.25C27.1989 18.25 27.3897 18.329 27.5303 18.4697C27.671 18.6103 27.75 18.8011 27.75 19V19.056C27.75 20.894 27.75 22.35 27.597 23.489C27.439 24.661 27.107 25.61 26.359 26.359C25.61 27.107 24.661 27.439 23.489 27.597C22.349 27.75 20.894 27.75 19.056 27.75H19C18.8011 27.75 18.6103 27.671 18.4697 27.5303C18.329 27.3897 18.25 27.1989 18.25 27C18.25 26.8011 18.329 26.6103 18.4697 26.4697C18.6103 26.329 18.8011 26.25 19 26.25C20.907 26.25 22.262 26.248 23.29 26.11C24.295 25.975 24.875 25.721 25.298 25.298C25.721 24.875 25.975 24.295 26.11 23.289C26.248 22.262 26.25 20.907 26.25 19C26.25 18.8011 26.329 18.6103 26.4697 18.4697C26.6103 18.329 26.8011 18.25 27 18.25Z" fill="url(#paint1_radial_103_1762)" />
                            <defs>
                                <radialGradient id="paint0_radial_103_1762" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(17 4.58646) rotate(90) scale(30.4356)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                                <radialGradient id="paint1_radial_103_1762" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(17 4.58646) rotate(90) scale(30.4356)">
                                    <stop stop-color="#2DD4BF" />
                                    <stop offset="0.509615" stop-color="#0EA5E9" />
                                    <stop offset="1" stop-color="#D946EF" />
                                </radialGradient>
                            </defs>
                        </svg>
                </button>

                    {/* Only show percentage when user has started typing */}
                    {wordCount > 0 && (
                        <div className="flex items-center gap-[15px] w-[86px] h-[28px]">
                            {/* Percentage text */}
                            <span className="text-semibold font-semibold text-slate-400 w-[51px] h-[28px] text-right">
                                {percentage.toFixed(2)}%
                            </span>

                            {/* Circular progress */}
                            <div className="relative w-[22px] h-[22px]">
                                <svg className="transform -rotate-90" viewBox="0 0 36 36">
                                    {/* Background circle */}
                                    <path
                                        className="text-gray-200"
                                        stroke="currentColor"
                                        strokeWidth="5"
                                        strokeLinecap="round"
                                        fill="none"
                                        d="M18 2.0845
               a 15.9155 15.9155 0 0 1 0 31.831
               a 15.9155 15.9155 0 0 1 0 -31.831"
                                    />

                                    {/* Gradient progress */}
                                    <path
                                        stroke="url(#nexastayGradient)"
                                        strokeWidth="5"
                                        strokeDasharray={`${percentage}, 100`}
                                        strokeLinecap="round"
                                        fill="none"
                                        d="M18 2.0845
               a 15.9155 15.9155 0 0 1 0 31.831
               a 15.9155 15.9155 0 0 1 0 -31.831"
                                    />

                                    <defs>
                                        <linearGradient id="nexastayGradient" x1="0" y1="0" x2="1" y2="1">
                                            <stop offset="0%" stopColor="#2DD4BF" />
                                            <stop offset="55%" stopColor="#0EA5E9" />
                                            <stop offset="100%" stopColor="#D946EF" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                    )}

            </div>
            </div>
            
            {/* Voice Transcriber Modal */}
            <VoiceTranscriber
                isVisible={showVoiceTranscriber}
                onTranscription={(text) => {
                    setValue(text);
                    setShowVoiceTranscriber(false);
                }}
                onCancel={() => setShowVoiceTranscriber(false)}
            />
        </div>
    );
}
