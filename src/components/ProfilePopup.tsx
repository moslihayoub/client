import React from 'react';

interface ProfilePopupProps {
    isOpen: boolean;
    onClose: () => void;
    position?: { top: number; right: number };
}

const ProfilePopup: React.FC<ProfilePopupProps> = ({ isOpen, onClose, position }) => {
    if (!isOpen) return null;

    const menuItems = [
        {
            id: 'profile',
            label: 'Mon profil',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 10C14.2091 10 16 8.20914 16 6C16 3.79086 14.2091 2 12 2C9.79086 2 8 3.79086 8 6C8 8.20914 9.79086 10 12 10Z" stroke="#475569" stroke-width="1.5" />
                    <path d="M12 21C15.866 21 19 19.2091 19 17C19 14.7909 15.866 13 12 13C8.13401 13 5 14.7909 5 17C5 19.2091 8.13401 21 12 21Z" stroke="#475569" stroke-width="1.5" />
                </svg>

            ),
            onClick: () => {
                console.log('Mon profil clicked');
                onClose();
            }
        },
        {
            id: 'language',
            label: 'Langue',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2.00001C6.477 2.00001 2 6.47701 2 12C2 12.4453 2.02833 12.8827 2.085 13.312C2.34457 15.2667 3.17569 17.1012 4.47404 18.5853C5.77239 20.0694 7.48014 21.1369 9.383 21.654C10.2362 21.8845 11.1162 22.0008 12 22C16.879 22 20.941 18.506 21.823 13.884C21.9397 13.2727 21.9987 12.6447 22 12C22.0015 10.5154 21.6718 9.04909 21.0348 7.70803C20.3978 6.36697 19.4697 5.18491 18.318 4.24801C16.5352 2.79091 14.3025 1.99653 12 2.00001Z" stroke="#475569" stroke-width="1.5" />
                    <path d="M2.08496 13.312C3.20871 12.9331 4.41956 12.8957 5.56456 13.2045C6.70956 13.5133 7.73737 14.1546 8.51817 15.0472C9.29897 15.9398 9.79773 17.0438 9.95147 18.2197C10.1052 19.3956 9.90703 20.5907 9.38196 21.654M21.823 13.885C20.8129 13.6826 19.872 13.2236 19.0908 12.5522C18.3095 11.8808 17.7142 11.0197 17.3621 10.0516C17.01 9.08352 16.913 8.04112 17.0804 7.0247C17.2478 6.00829 17.674 5.05206 18.318 4.24805" stroke="#475569" stroke-width="1.5" />
                    <path d="M16 16C16 16.2652 15.8946 16.5196 15.7071 16.7071C15.5196 16.8946 15.2652 17 15 17C14.7348 17 14.4804 16.8946 14.2929 16.7071C14.1054 16.5196 14 16.2652 14 16C14 15.7348 14.1054 15.4804 14.2929 15.2929C14.4804 15.1054 14.7348 15 15 15C15.2652 15 15.5196 15.1054 15.7071 15.2929C15.8946 15.4804 16 15.7348 16 16ZM13 8.5C13 9.16304 12.7366 9.79893 12.2678 10.2678C11.7989 10.7366 11.163 11 10.5 11C9.83696 11 9.20107 10.7366 8.73223 10.2678C8.26339 9.79893 8 9.16304 8 8.5C8 7.83696 8.26339 7.20107 8.73223 6.73223C9.20107 6.26339 9.83696 6 10.5 6C11.163 6 11.7989 6.26339 12.2678 6.73223C12.7366 7.20107 13 7.83696 13 8.5Z" stroke="#475569" stroke-width="1.5" />
                </svg>


            ),
            onClick: () => {
                console.log('Langue clicked');
                onClose();
            }
        },
        {
            id: 'calendar',
            label: 'Calendrier',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 12C2 8.229 2 6.343 3.172 5.172C4.344 4.001 6.229 4 10 4H14C17.771 4 19.657 4 20.828 5.172C21.999 6.344 22 8.229 22 12V14C22 17.771 22 19.657 20.828 20.828C19.656 21.999 17.771 22 14 22H10C6.229 22 4.343 22 3.172 20.828C2.001 19.656 2 17.771 2 14V12Z" stroke="#475569" stroke-width="1.5" />
                    <path d="M7 4V2.5V4ZM17 4V2.5V4ZM2.5 9H21.5H2.5Z" fill="#64748B" />
                    <path d="M7 4V2.5M17 4V2.5M2.5 9H21.5" stroke="#475569" stroke-width="1.5" stroke-linecap="round" />
                    <path d="M18 17C18 17.2652 17.8946 17.5196 17.7071 17.7071C17.5196 17.8946 17.2652 18 17 18C16.7348 18 16.4804 17.8946 16.2929 17.7071C16.1054 17.5196 16 17.2652 16 17C16 16.7348 16.1054 16.4804 16.2929 16.2929C16.4804 16.1054 16.7348 16 17 16C17.2652 16 17.5196 16.1054 17.7071 16.2929C17.8946 16.4804 18 16.7348 18 17ZM18 13C18 13.2652 17.8946 13.5196 17.7071 13.7071C17.5196 13.8946 17.2652 14 17 14C16.7348 14 16.4804 13.8946 16.2929 13.7071C16.1054 13.5196 16 13.2652 16 13C16 12.7348 16.1054 12.4804 16.2929 12.2929C16.4804 12.1054 16.7348 12 17 12C17.2652 12 17.5196 12.1054 17.7071 12.2929C17.8946 12.4804 18 12.7348 18 13ZM13 17C13 17.2652 12.8946 17.5196 12.7071 17.7071C12.5196 17.8946 12.2652 18 12 18C11.7348 18 11.4804 17.8946 11.2929 17.7071C11.1054 17.5196 11 17.2652 11 17C11 16.7348 11.1054 16.4804 11.2929 16.2929C11.4804 16.1054 11.7348 16 12 16C12.2652 16 12.5196 16.1054 12.7071 16.2929C12.8946 16.4804 13 16.7348 13 17ZM13 13C13 13.2652 12.8946 13.5196 12.7071 13.7071C12.5196 13.8946 12.2652 14 12 14C11.7348 14 11.4804 13.8946 11.2929 13.7071C11.1054 13.5196 11 13.2652 11 13C11 12.7348 11.1054 12.4804 11.2929 12.2929C11.4804 12.1054 11.7348 12 12 12C12.2652 12 12.5196 12.1054 12.7071 12.2929C12.8946 12.4804 13 12.7348 13 13ZM8 17C8 17.2652 7.89464 17.5196 7.70711 17.7071C7.51957 17.8946 7.26522 18 7 18C6.73478 18 6.48043 17.8946 6.29289 17.7071C6.10536 17.5196 6 17.2652 6 17C6 16.7348 6.10536 16.4804 6.29289 16.2929C6.48043 16.1054 6.73478 16 7 16C7.26522 16 7.51957 16.1054 7.70711 16.2929C7.89464 16.4804 8 16.7348 8 17ZM8 13C8 13.2652 7.89464 13.5196 7.70711 13.7071C7.51957 13.8946 7.26522 14 7 14C6.73478 14 6.48043 13.8946 6.29289 13.7071C6.10536 13.5196 6 13.2652 6 13C6 12.7348 6.10536 12.4804 6.29289 12.2929C6.48043 12.1054 6.73478 12 7 12C7.26522 12 7.51957 12.1054 7.70711 12.2929C7.89464 12.4804 8 12.7348 8 13Z" fill="#475569" />
                </svg>


            ),
            onClick: () => {
                console.log('Calendrier clicked');
                onClose();
            }
        },
        {
            id: 'system',
            label: 'System',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.5 2H9.5C6.672 2 5.257 2 4.379 2.879C3.5 3.757 3.5 5.172 3.5 8V11C3.5 12.886 3.5 13.828 4.086 14.414C4.672 15 5.614 15 7.5 15H16.5C18.386 15 19.328 15 19.914 14.414C20.5 13.828 20.5 12.886 20.5 11V8C20.5 5.172 20.5 3.757 19.621 2.879C18.743 2 17.328 2 14.5 2Z" stroke="#475569" stroke-width="1.5" />
                    <path d="M5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V18C22 17.7348 21.8946 17.4804 21.7071 17.2929C21.5196 17.1054 21.2652 17 21 17H16.667C16.2343 17 15.8132 17.1404 15.467 17.4L14.533 18.1C14.1868 18.3596 13.7657 18.5 13.333 18.5H10.667C10.2343 18.5 9.81319 18.3596 9.467 18.1L8.533 17.4C8.18681 17.1404 7.76574 17 7.333 17H3C2.73478 17 2.48043 17.1054 2.29289 17.2929C2.10536 17.4804 2 17.7348 2 18V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22Z" stroke="#475569" stroke-width="1.5" stroke-linecap="round" />
                </svg>


            ),
            onClick: () => {
                console.log('System clicked');
                onClose();
            }
        },
        {
            id: 'settings',
            label: 'Paramètre',
            icon: (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.843 3.802C9.872 2.601 10.886 2 12 2C13.114 2 14.128 2.6 16.157 3.802L16.843 4.208C18.872 5.41 19.886 6.011 20.443 7C21 7.99 21 9.19 21 11.594V12.406C21 14.809 21 16.011 20.443 17C19.886 17.989 18.872 18.59 16.843 19.791L16.157 20.198C14.128 21.399 13.114 22 12 22C10.886 22 9.872 21.4 7.843 20.198L7.157 19.791C5.128 18.591 4.114 17.989 3.557 17C3 16.01 3 14.81 3 12.406V11.594C3 9.19 3 7.989 3.557 7C4.114 6.011 5.128 5.41 7.157 4.208L7.843 3.802Z" stroke="#475569" stroke-width="1.5" />
                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#475569" stroke-width="1.5" />
                </svg>

            ),
            onClick: () => {
                console.log('Paramètre clicked');
                onClose();
            }
        }
    ];

    return (
        <>
            {/* Backdrop */}
            <div
                className="fixed inset-0 z-40"
                onClick={onClose}
            />

             {/* Popup */}
             <div
                 className="fixed z-50 w-[281px] bg-white rounded-[24px] p-[14px] flex flex-col gap-[12px]"
                 style={{
                     top: position?.top ?? 70,
                     right: position?.right ?? 36,
                     boxShadow: '0px 25px 50px -12px rgba(0, 0, 0, 0.25)'
                 }}
             >
                {menuItems.map((item) => (
                    <button
                        key={item.id}
                        onClick={item.onClick}
                        className="flex items-center gap-[10px] px-[8px] py-[4px] rounded-[7px] hover:bg-slate-50 transition-colors duration-150 w-full text-left group"
                    >
                        <div className="w-[24px] h-[24px] flex items-center justify-center flex-shrink-0">
                            {item.icon}
                        </div>
                        <p className="text-[14px] text-slate-700 font-bricolagegrotesque font-normal leading-[20px] flex-1">
                            {item.label}
                        </p>
                    </button>
                ))}
            </div>
        </>
    );
};

export default ProfilePopup;

